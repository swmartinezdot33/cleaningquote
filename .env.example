# Copy to .env.local and fill in values. Never commit .env.local.
# For production, set these in Vercel → Settings → Environment Variables.

# Public domain (set in Vercel for production; used for auth redirects and canonical URLs)
NEXT_PUBLIC_APP_URL=https://www.cleanquote.io

# Supabase (multi-tenant auth + tools table)
NEXT_PUBLIC_SUPABASE_URL=https://YOUR_PROJECT_REF.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here
# Required for super admin to see all orgs in dashboard org switcher (local + production)
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# Admin + KV (required for app and migration)
ADMIN_PASSWORD=your_strong_admin_password
KV_REST_API_URL=
KV_REST_API_TOKEN=

# Optional but recommended
JWT_SECRET=

# Optional
GOOGLE_MAPS_API_KEY=
# Vercel Blob: required for survey option image uploads (condition images, etc.). In Vercel: Project → Storage → Create Database → Blob → copy "BLOB_READ_WRITE_TOKEN" into Environment Variables. Locally: add same name to .env.local.
BLOB_READ_WRITE_TOKEN=

# Stripe (sell CleanQuote.io via Payment Link / Checkout)
# Monthly and annual price IDs from Stripe Dashboard → Products → Your Product → Pricing.
STRIPE_PRICE_ID_MONTHLY=price_1SyIWSLVHXcZJ1tW4Q8D7Jad
STRIPE_PRICE_ID_ANNUAL=price_1SyIWSLVHXcZJ1tWYJMILwyp
# Legacy: single price (fallback if monthly/annual not set)
STRIPE_PRICE_ID=
# Payment link URL (fallback if no STRIPE_PRICE_ID). Get from Stripe Dashboard → Payment Links.
NEXT_PUBLIC_STRIPE_PAYMENT_LINK_URL=
# Webhook: Stripe Dashboard → Developers → Webhooks → Add endpoint → /api/webhooks/stripe. Use signing secret (whsec_...).
STRIPE_WEBHOOK_SECRET=
# Optional: second webhook destination (e.g. Workbench "cleanquote-thin") — same URL, different signing secret.
STRIPE_WEBHOOK_SECRET_ALT=
# Secret key (sk_live_... or sk_test_...) for API and webhook verification.
STRIPE_SECRET_KEY=
# Publishable key (pk_live_... or pk_test_...) for appointment pre-auth payment capture on quote page. When set, customers can save a card at review step (no charge).
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=
# Billing portal: org admins see "Manage billing" on Profile. Stripe Customer Portal or custom URL.
NEXT_PUBLIC_STRIPE_BILLING_PORTAL_URL=

# Post-checkout confirmation email (Resend). When set, new purchasers get an email with a set-password link.
RESEND_API_KEY=
RESEND_FROM=CleanQuote.io <team@clean.io>
# Inbound email webhook: Resend Dashboard → Webhooks → (your webhook) → Signing secret. Verifies email.received requests.
RESEND_WEBHOOK_SECRET=

# Super admin: comma-separated emails that can manage all users and orgs
SUPER_ADMIN_EMAILS=admin@example.com

# Vercel API (for adding custom domains programmatically via /api/admin/custom-domain/add)
# Create token at vercel.com/account/tokens. VERCEL_PROJECT_ID is auto-set in deployments; set VERCEL_PROJECT_NAME if needed.
VERCEL_TOKEN=
# VERCEL_PROJECT_ID=  # Auto-set by Vercel; override if needed
# VERCEL_PROJECT_NAME=cleaningquote
# VERCEL_TEAM_ID=  # Optional, for team projects

# Marketplace app OAuth (from your app's Client Keys)
# Redirect URI: must EXACTLY match GHL Marketplace app settings (including www vs non-www, no trailing slash).
GHL_CLIENT_ID=
GHL_CLIENT_SECRET=
# MUST exactly match GHL Marketplace App → Redirect URI (use oauth/callback, matches MaidCentral)
# Set this same value in GHL Marketplace → App → Redirect URI
GHL_REDIRECT_URI=https://www.cleanquote.io/api/auth/oauth/callback
# SSO key for iframe context: Marketplace App → Advanced Settings → Auth → Shared Secret. REQUIRED for locationId from user context.
# Must be the Shared Secret for the CleanQuote app (not MaidCentral or other apps).
GHL_APP_SSO_KEY=
# Optional: base URL for OAuth redirects (default: Vercel URL or http://localhost:PORT)
# APP_BASE_URL=
# Optional: override default OAuth scopes; GHL_VERSION_ID if needed for your app
# GHL_SCOPE=
# GHL_VERSION_ID=
# For creating GHL sub-accounts on purchase: Agency token + Company ID (required for Stripe→GHL flow)
# Get Agency token from OAuth with user_type=Company, or Agency Settings → API Keys.
GHL_AGENCY_ACCESS_TOKEN=
GHL_COMPANY_ID=

# One-time migration (first user + default tool). Can remove after migration.
MIGRATION_USER_EMAIL=
MIGRATION_USER_PASSWORD=
MIGRATION_DEFAULT_SLUG=default
MIGRATION_SECRET=
RUN_MIGRATION=
